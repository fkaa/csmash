/***********************************************************************
 *	d:/Werk/src/csmash-0.3.8.new/conv/auto
 *	$Id$
 *
 *	Copyright by ESESoft.
 *	You are granted the right to redistribute this file under
 *	the "Artistic license". See "ARTISTIC" for detail.
 *
 ***********************************************************************/
#ifndef __wata_ESESoft_6053__auto__INCLUDED__
#define __wata_ESESoft_6053__auto__INCLUDED__
/***********************************************************************/
/* __BEGIN__BEGIN__ */
template<typename T>
class auto_vector
{
private:
    T* p;
public:
    inline auto_vector(T *p = NULL) : p(p) {}
    inline ~auto_vector() { delete[] p; }
    inline auto_vector(const T& v) {
	T& t = const_cast<T&>(v);
	if (p) delete[] p;
	p = t.release();
    }
    inline auto_vector(T& v) {
	if (p) delete[] p;
	p = v.release();
    }
    
    inline T& operator[](int i) const { return p[i]; }
    inline T& operator[](unsigned int i) const { return p[i]; }
    inline bool empty() const { return p == NULL; }
    
    inline T* get() { return p; }	// use of get() is not encouraged.
    inline T* release() { T* r = p; p = NULL; return r; }
};
/* __END__END__ */
/***********************************************************************/
#endif
/***********************************************************************
 *	END OF auto.h
 ***********************************************************************/
